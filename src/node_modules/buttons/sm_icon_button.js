
module.exports = sm_icon_button

// CSS Boiler Plat
const sheet = new CSSStyleSheet
const theme = get_theme()
sheet.replaceSync(theme)





// Props - icon/img src
function sm_icon_button (props) {
    let {src, src_active} = props

    const el = document.createElement('div')
    const shadow = el.attachShadow({mode:'closed'})

    const sm_icon_button = document.createElement('div')
    sm_icon_button.classList.add('sm_icon_button')
    
    const icon = document.createElement('img')
    icon.src = src
    sm_icon_button.append(icon)

    // Toggle Icon
    if(src_active){
        let activeState = true;
        sm_icon_button.onclick = (e) =>{
            ;(activeState)?icon.src = src_active: icon.src = src
            activeState = !activeState
            toggle_class(e)
        }
    }else{
        // Toggle Class
        sm_icon_button.onclick = (e) => toggle_class(e)
    }

    const style = document.createElement('style')
    style.textContent = get_theme()

    shadow.append(sm_icon_button, style)
    shadow.adoptedStyleSheets = [sheet]
    return el
}



function get_theme(){
    return`
        :host{ 
            --white: white;
            --ac-1: #2ACA4B;
            --ac-2: #F9A5E4;
            --ac-3: #88559D;
            --ac-4: #293648;
        }
        .sm_icon_button{
            display:flex;
            justify-content: center;
            align-items:center;
            height:30px;
            box-sizing:border-box;
            aspect-ratio:1/1;
            cursor:pointer;
            border: 1px solid var(--ac-4);
            // border-left: var(--white);
            background-color: var(--white);
        }
        .sm_icon_button img{
            pointer-events:none;
        }
        .sm_icon_button.active{
            background-color: var(--ac-2)
        }
    `
}



function toggle_class(e){
    let selector = e.target.classList
    ;( selector.contains('active') ) ? selector.remove('active') : selector.add('active')
}
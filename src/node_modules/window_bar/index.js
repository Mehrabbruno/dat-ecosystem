module.exports = window_bar

const icon_button = require('buttons/icon_button')



// CSS Boiler Plat
const sheet = new CSSStyleSheet
const theme = get_theme()
sheet.replaceSync(theme)





function window_bar (props) {
    const el = document.createElement('div')
    const shadow = el.attachShadow( { mode : 'closed' } )
    
    shadow.innerHTML = `
        <div class="window_bar">
            <div class="application_icon_wrapper"></div>
            <div class="application_name"><span>${props.name}</span></div>
            <div class="window_bar_actions"></div>
        </div>
        <style>${get_theme}</style>
    `

    // adding application icon
    const application_icon = icon_button({src:'application_icon.png'})
    const application_icon_wrapper = shadow.querySelector('.application_icon_wrapper')
    application_icon_wrapper.append(application_icon)

    // adding action buttons
    const window_bar_actions = shadow.querySelector('.window_bar_actions')
    const close_window_btn = icon_button({src:'close.png'})
    window_bar_actions.append(close_window_btn)


    shadow.adoptedStyleSheets = [sheet]
    return el


}





function get_theme(){
    return`
        :host{ 
            --white: white;
            --ac-1: #2ACA4B;
            --ac-2: #F9A5E4;
            --ac-3: #88559D;
            --ac-4: #293648;
        }

        .window_bar{
            max-height:40px;
            background-color: var(--ac-4);
            display:inline-flex;
            width:100%;
            justify-content: flex-start;
            height:max-content;
            background-size: 10px 10px;
            background-image:  repeating-linear-gradient(0deg, #FFFFFF, #FFFFFF 2px, #293648 2px, #293648);
            container-type: inline-size;
            border: 1px solid var(--ac-4);
        }

        .application_icon_wrapper{ 
            display:none;
        }

        .application_name{
            display:flex;
            align-items:center;
            min-height: 100%;
            width: max-content;
            color:var(--white);
            padding: 0 10px;
            box-sizing:border-box;
            border: 1px solid var(--ac-4);
            background-color:var(--ac-4);
        }

        .window_bar_actions{
            margin-left: auto;
        }




        @container(min-width: 856px) {
            .application_icon_wrapper{ 
                display:block;
            }
        }


    `
}